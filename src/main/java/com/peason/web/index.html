<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Records Table</title>
    <style>
        #table-container {
            height: 400px;
            overflow-y: scroll;
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            padding: 8px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
    </style>
</head>
<body>
<h1>Records Table</h1>
<div id="table-container">
    <table id="records-table">
        <thead>
        <tr>
            <th>ID</th>
            <th>Field1</th>
            <th>Field2</th>
            <th>Field3</th>
            <th>Field4</th>
            <th>Field5</th>
            <th>Field6</th>
            <th>Field7</th>
            <th>Field8</th>
            <th>Field9</th>
        </tr>
        </thead>
        <tbody></tbody>
    </table>
</div>
<script>
    let page = 0;
    const size = 100;
    let allRecordsLoaded = false;

    async function fetchRecords() {
        if (allRecordsLoaded) return;

        const response = await fetch(`/api/recordsA?page=${page}&size=${size}`);
        const data = await response.json();

        if (data.content.length < size) {
            allRecordsLoaded = true;
        }

        const tableBody = document.querySelector("#records-table tbody");
        data.content.forEach(record => {
            const row = tableBody.insertRow();
            row.insertCell(0).textContent = record.id;
            row.insertCell(1).textContent = record.field1;
            row.insertCell(2).textContent = record.field2;
            row.insertCell(3).textContent = record.field3;
            row.insertCell(4).textContent = record.field4;
            row.insertCell(5).textContent = record.field5;
            row.insertCell(6).textContent = record.field6;
            row.insertCell(7).textContent = record.field7;
            row.insertCell(8).textContent = record.field8;
            row.insertCell(9).textContent = record.field9;
        });

        page++;
    }

    document.getElementById('table-container').addEventListener('scroll', function() {
        if (this.scrollTop + this.clientHeight >= this.scrollHeight) {
            fetchRecords();
        }
    });

    // Initial fetch
    fetchRecords();
</script>
</body>
</html>
